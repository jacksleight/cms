.bard-fieldtype-wrapper {
    @apply border rounded relative outline-none;

    * { outline: none; }
}

.bard-editor {
    @apply text-gray-800 bg-gray-100 shadow-inner p-0 relative rounded;
}

.bard-editor .ProseMirror {
    @apply p-1 min-h-40 text-sm leading-tight;
    @apply @sm/bard:p-2 text-md leading-normal;
    @apply @lg/bard:p-4;
    &:focus {
        @apply ring-2 ring-inset ring-blue-200;
    }
}

.bard-editor .bard-invalid {
    @apply p-2 @lg:px-4 bg-red-100 text-red-500 text-xs whitespace-nowrap;
}

/*  Modes */
.bard-editor.mode\:read-only .ProseMirror {
    @apply bg-gray-300 text-gray-700;
}

.bard-editor.mode\:minimal .ProseMirror {
    min-height: 80px;
}

.bard-editor.mode\:inline .ProseMirror {
    @apply p-2;
    min-height: 38px;
    p {
        margin-bottom: 0;
        line-height: 1.375; /*  22px */
    }
}

.bard-fixed-toolbar {
    @apply bg-white shadow-none rounded-t border-b text-sm flex items-start justify-between p-1 z-5 top-0;

    .bard-toolbar-button {
        @apply text-gray-800 rounded px-1 flex text-center justify-center items-center text-base h-8 w-8 m-0;
        svg {
            @apply w-auto h-4;
        }
    }

    .bard-toolbar-button:hover {
        @apply bg-gray-200;
    }

    .bard-toolbar-button.active {
        @apply bg-gray-300 text-black;
    }

    .bard-toolbar-button:focus {
        @apply focus-outline;
    }

    .bard-toolbar-button:disabled {
        @apply opacity-50;
        &:hover {
            @apply text-gray-800;
        }
    }

    button sup {
        @apply font-sans;
    }
}

.bard-fixed-toolbar.dark {
    @apply bg-black rounded-full shadow-lg px-4;

    button {
        @apply text-gray-700 rounded px-1 flex items-center justify-center text-base text-center bg-transparent h-8 w-8 my-0 mx-0.5 outline-none;
        svg {
            @apply w-auto h-4;
        }
    }

    button.active {
        @apply text-white;
    }
}

/*  Fixed toolbar inside another bard field */
.bard-fieldtype .bard-fieldtype .bard-fixed-toolbar {
    z-index: 4;
    top: 40px;
}

/*  Fixed toolbar inside the live preview */
.live-preview-fields-narrow .bard-fixed-toolbar { top: 0; }
.live-preview-fields-wide .bard-fixed-toolbar { top: -24px; }
.live-preview-fields-narrow .bard-fieldtype .bard-fieldtype .bard-fixed-toolbar { top: 40px; }
.live-preview-fields-wide .bard-fieldtype .bard-fieldtype .bard-fixed-toolbar { top: 16px; }

/*  Fixed toolbar inside a stack */
.stack-content .bard-fixed-toolbar { top: -24px; }

/*  Responive Wangjangling */
@screen md {
    /*  Fixed toolbar below fixed global header */
    .bard-fixed-toolbar { top: 52px; }
    .bard-fieldtype .bard-fieldtype .bard-fixed-toolbar { top: 92px; }

    /*  Fixed toolbar inside a stack */
    .stack-content .bard-fieldtype .bard-fieldtype .bard-fixed-toolbar { top: 16px; }
}

.bard-floating-toolbar {
    @apply flex bg-black rounded-full shadow-lg px-0;
    white-space: nowrap;

    &:before {
        content: '';
        border: 6px solid transparent;
        border-top-color: black;
        position: absolute;
        top: 100%;
        left: 50%;
        margin-left: -3px
    }

    .bard-toolbar-button {
        @apply text-gray-200 h-10 w-10 text-center bg-black rounded-lg flex items-center justify-center;
        font-size: 16px;
        transition: all .1s ease-in-out;
        svg {
            @apply w-4 h-4;
        }
    }

    .bard-toolbar-button:hover {
        @apply text-white;
    }

    .bard-toolbar-button.active {
        @apply text-blue;
    }

    .bard-toolbar-button:focus {
        outline: none;
    }

    .bard-toolbar-button:disabled {
        @apply opacity-50;
        &:hover {
            @apply text-gray-200;
        }
    }

    button sup {
        font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif;
    }
}

.bard-footer-toolbar {
    @apply bg-white shadow-none text-gray-700 rounded-b border-t text-xs p-2 flex items-center justify-between;
    padding: 8px 12px;

    .bard-fullscreen & {
        position: sticky;
        bottom: 0;
        z-index: 10;
    }
}

.bard-set:active .sortable-handle:hover ~ * .popover {
    display: none;
}

.bard-set.has-error > .replicator-set-header label {
    @apply text-red-500;
}

/* The set selection options for each text block
  ========================================================================== */

.bard-set-selector {
    /*  transition: all .15s ease-in-out; */

    .dropdown-menu {
        left: -5px;
        right: auto;
    }
}

.set-picker .popover .popover-content {
    min-width: 320px !important;
}


/* Fullscreen mode
   ========================================================================== */

.bard-fullscreen {
    @apply fixed bg-gray-200 inset-0 min-h-screen overflow-scroll rounded-none pt-16;

    .bard-editor {
        @apply bg-white shadow max-w-xl mx-auto rounded relative my-6 px-8;
    }

    .bard-fixed-toolbar {
        @apply shadow h-12 fixed w-full bg-gradient-to-b from-white to-gray-100;
        padding: 7px 8px;
        top: 0;
        z-index: 999;

        button {
            @apply mx-1;
        }
    }

    .ProseMirror {
        @apply px-6 py-16 flex flex-col;
        min-height: calc(100vh - 120px);

        > p > code, > pre code {
            @apply bg-gray-300;
        }

        /*  To remove min height from nested bard fields inside bard in fullscreen mode. */
        * > .ProseMirror {
            min-height: auto;
        }

        &:focus {
            @apply ring-0;
        }
    }

    .bard-set-selector {
        @apply ml-6;
    }

    .bard-field-options {
        @apply fixed top-0 inset-x-0 bg-gray-700 p-4 w-full;
        text-align: right;
        z-index: 1; /*  to appear over the top of .bard-editor */

        .icon { font-size: 24px; }
        a { margin-left: 16px; color: #fff; opacity: 1; }
    }
}


/* Typography
   ========================================================================== */
.bard-fieldtype .ProseMirror {
    outline: 0;

    p.bard-node {
        @apply text-gray-800;
        word-break: break-all;
        word-break: break-word;
        line-height: 1.7;
        text-size-adjust: 100%;
        margin-top: 0;
        margin-bottom: .85em;
    }

    b .bard-mark,
    strong .bard-mark {
        font-weight: 700;
    }

    em .bard-mark,
    i .bard-mark {
        font-style: italic
    }

    a .bard-mark {
        @apply text-blue underline break-words;

        &:active,
        &:focus,
        &:hover {
            outline: 0;
            text-decoration: underline;
        }
    }

    img.bard-node {
        border: 0;
        max-width: 100%;
    }

    hr.bard-node {
        @apply bg-gray-600;
        height: 4px;
        padding: 0;
        margin: 1.7em 0;
        overflow: hidden;
        border: none;

        &:after,
        &:before {
            display: table;
            content: " ";
        }

        &:after {
            clear: both
        }
    }

    h1.bard-node,
    h2.bard-node,
    h3.bard-node,
    h4.bard-node,
    h5.bard-node,
    h6.bard-node {
        margin-top: 1.275em;
        margin-bottom: .85em;
        font-weight: 700;

        &:first-child {
            margin-top: 0;
        }
    }

    h1.bard-node {
        font-size: 2em;
    }

    h2.bard-node {
        font-size: 1.75em;
    }

    h3.bard-node {
        font-size: 1.5em;
    }

    h4.bard-node {
        font-size: 1.25em;
    }

    h5.bard-node {
        font-size: 1em;
    }

    h6.bard-node {
        font-size: 1em;
        @apply text-gray-700;
    }

    ul.bard-node {
        list-style-type: disc;

        ul.bard-node {
            list-style-type: circle;
        }
    }

    ol.bard-node {
        list-style-type: decimal;

        ol.bard-node {
            list-style-type: decimal;
        }
    }

    ol.bard-node,
    ul.bard-node {
        padding: 0;
        margin: 0;
        margin-bottom: .85em;
        padding-left: 2em;

        ol.bard-node,
        ul.bard-node {
            margin-bottom: 0;
        }
    }

    blockquote.bard-node {
        @apply text-gray-800 border-l-4 border-blue px-4;
        margin: 0 0 .85em;

        &:first-child {
            margin-top: 0;
        }

        &:last-child {
            margin-bottom: 0;
        }
    }

    .tableWrapper.bard-node > table {
        @apply w-full overflow-hidden m-0 mb-4 bg-white text-sm ;
        border-collapse: collapse;
        table-layout: fixed;

        th.bard-node {
            @apply font-bold text-left bg-gray-200;
        }

        td.bard-node,
        th.bard-node {
            @apply border align-top relative py-1 px-2;
            min-width: 1em;
            p.bard-node,
            ol.bard-node,
            ul.bard-node {
                margin-bottom: 0;
            }
            &.selectedCell {
                @apply relative;
    
                &:after {
                    @apply bg-gray-400 absolute inset-0 pointer-events-none opacity-25;
                    content: '';
                }
            }
        }
    }

    code .bard-mark {
        @apply font-mono bg-gray-400 rounded-sm text-xs relative;
        padding: 2px 4px;
        top: -1px;
    }

    pre.bard-node {
        margin-bottom: .85em;
        > code {
            @apply font-mono bg-gray-400 text-xs p-4 block w-full rounded;
            line-height: 1.8;
        }
    }

}

/* Placeholder
========================================================================== */

.bard-fieldtype .ProseMirror > p.is-editor-empty:first-child::before {
    @apply text-gray-600;
    content: attr(data-placeholder);
    float: left;
    height: 0;
    pointer-events: none;
}

/* Link toolbar
  ========================================================================== */

  .bard-link-toolbar {

    .input {
        @apply p-0 text-xs h-8 bg-transparent shadow-none border-none;
        width: 240px;
        outline: none;
    }

    .bard-toolbar-button {
        @apply p-0 text-gray-700 outline-none;
        font-size: 16px;

        &:hover {
            @apply text-gray-900;
        }
    }
}

.bard-inline-image-container {
    @apply relative bg-white border rounded whitespace-normal mb-6;
    &:hover {
        cursor: grab;
    }
}
